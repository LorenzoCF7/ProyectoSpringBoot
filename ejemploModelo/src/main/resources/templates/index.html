<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto Spring Boot</title>
    <link rel="stylesheet" th:href="@{/styles.css}">
</head>
<body>
<div class="container">
    <div class="header" style="text-align: center;">
        <h1>Sistema de Gestión</h1>
        <p>Bienvenido, <span sec:authentication="name"></span></p>
        <div style="margin-top: 1rem;">
            <form th:action="@{/logout}" method="post" style="display: inline; background: none; box-shadow: none; padding: 0; margin: 0;">
                <button type="submit" class="btn btn-danger btn-sm">Cerrar Sesión</button>
            </form>
        </div>
    </div>

    <!-- Menú para usuarios normales -->
    <div class="nav-buttons">
        <a href="/perfiles/listar" class="btn btn-primary">Mis Perfiles</a>
        <a href="/perfiles/nuevo" class="btn btn-secondary">Nuevo Perfil</a>
        <a href="/suscripciones/mi-suscripcion" class="btn btn-primary">Gestionar Mi Suscripción</a>
        <a href="/facturas/listar" class="btn btn-primary">Mis Facturas</a>
        <a href="/facturas/nuevo" class="btn btn-secondary">Nueva Factura</a>
        <a href="/pagos/listar" class="btn btn-primary">Mis Pagos</a>
        <a href="/pagos/nuevo" class="btn btn-secondary">Nuevo Pago</a>
    </div>

    <!-- Menú solo para administradores -->
    <div sec:authorize="hasAuthority('ROLE_ADMIN')">
        <div class="lista-section" style="border-left: 4px solid var(--warning); margin-top: 1rem;">
            <h2 style="color: var(--warning);">Panel de Administración</h2>
            <div class="nav-buttons" style="margin-top: 1rem;">
                <a href="/admin/auditoria" class="btn btn-info">Panel de Auditoría</a>
                <a href="/usuarios/listar" class="btn btn-primary">Gestionar Usuarios</a>
                <a href="/usuarios/nuevo" class="btn btn-secondary">Nuevo Usuario</a>
                <a href="/planes/listar" class="btn btn-primary">Gestionar Planes</a>
                <a href="/planes/nuevo" class="btn btn-secondary">Nuevo Plan</a>
            </div>
        </div>
    </div>
    
</div>
</body>
</html>