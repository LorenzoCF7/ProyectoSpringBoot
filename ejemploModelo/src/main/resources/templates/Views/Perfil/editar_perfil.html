<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Perfil</title>
    <link rel="stylesheet" th:href="@{/styles.css}">
</head>
<body>
<div class="container">
    <div class="header">
        <h1>Editar Perfil</h1>
        <p>Actualiza la información del perfil</p>
    </div>

    <form th:action="@{/perfiles/{id}/actualizar(id=${perfil.id})}" th:object="${perfil}" method="post">
        <div class="form-group">
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" th:field="*{nombre}" placeholder="Nombre del perfil" required>
        </div>

        <div class="form-group">
            <label for="apellido">Apellido:</label>
            <input type="text" id="apellido" th:field="*{apellido}" placeholder="Apellido del perfil" required>
        </div>

        <div class="form-group">
            <label for="telefono">Teléfono:</label>
            <input type="text" id="telefono" th:field="*{telefono}" placeholder="Teléfono del perfil" required>
        </div>

        <div class="form-group" th:if="${usuarios != null}" sec:authorize="hasAuthority('ROLE_ADMIN')">
            <label for="usuario">Usuario Asociado:</label>
            <select id="usuario" th:field="*{usuario}" required>
                <option value="">-- Selecciona un usuario --</option>
                <option th:each="usuario : ${usuarios}" th:value="${usuario.id}" th:text="${usuario.email}"></option>
            </select>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-success">✓ Guardar Cambios</button>
            <a th:href="@{/perfiles/{id}(id=${perfil.id})}" class="btn btn-secondary">← Cancelar</a>
        </div>
    </form>
</div>
</body>
</html>